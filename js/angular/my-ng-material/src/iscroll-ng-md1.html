<!DOCTYPE html>
<html lang="en" ng-app="MyApp" ng-controller="DemoCtrl as ctrl" layout="column" ng-cloak="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, flexinitial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <title>iscroll test</title>
    <link rel="stylesheet" href="https://unpkg.com/angular-material@1.1.1/angular-material.css"/>

    <style>

        .main {
            max-width: 600px;
            margin: 0 auto;
        }

        .iscroll-wrapper {
            position: relative;
            z-index: 1;
            width: 100%;
            /*height: 600px !important;*/
            overflow: hidden;
            background-color: #ccc;
            border: 1px solid blue;
        }

        .iscroll-scroller {
            position: absolute;
            width: 100%;
            min-height: 100%;
            background-color: #fff;
        }

        .header {
            background-color: #84ffff;
            height: 60px;
        }

        .footer {
            background-color: #b9f6ca;
            height: 60px;
        }
    </style>
</head>

<body ng-controller="DemoCtrl  " layout="">
<div layout="column" flex="" class="main ">
    <div class="header">header</div>

    <div flex class="iscroll-wrapper" iscroll="iscrollParam" iscroll-instance="instance">
        <div class="iscroll-scroller">
            <ol>
                <li>aaa instance.options： -
                    <pre>{{instance.options | json}}</pre>
                    -
                </li>
                <li>aaa iScrollState ： {{iScrollState}}</li>
                <li>aaa
                    <md-checkbox aria-label="dd"></md-checkbox>
                </li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
                <li>aaa</li>
            </ol>
        </div>
    </div>
    <div class="footer">footer
        <md-checkbox aria-label="dd"></md-checkbox>
    </div>
</div>
</body>
<script src="https://unpkg.com/angular@1.6.1/angular.js"></script>
<script src="https://unpkg.com/angular-animate@1.6.1/angular-animate.js"></script>
<script src="https://unpkg.com/angular-aria@1.6.1/angular-aria.js"></script>
<script src="https://unpkg.com/angular-messages@1.6.1/angular-messages.js"></script>
<script src="https://unpkg.com/angular-material@1.1.1/angular-material.js"></script>
<script src="https://unpkg.com/platform@1.3.3/platform.js"></script>
<script src="https://unpkg.com/iscroll@5.2.0/build/iscroll.js"></script>
<script src="https://unpkg.com/angular-iscroll@3.4.0/dist/lib/angular-iscroll.js"></script>
<script>
    (function () {

        document.addEventListener('touchmove', function (e) {
            e.preventDefault();
        }, false);
        angular
                .module('MyApp', ['ngMaterial', 'ngMessages', 'angular-iscroll'])
                .config(function (iScrollServiceProvider) {
                    iScrollServiceProvider.configureDefaults({
//                        iScroll: {
//                            // Passed through to the iScroll library
//                            scrollbars: true,
//                            fadeScrollbars: true,
//                            bounce: true
//                        },
//                        directive: {
//                            // Interpreted by the directive
//                            refreshInterval: 500
//                        }
                    });
                })
                .controller('DemoCtrl', ['$scope', 'iScrollService', function ($scope, iScrollService) {
                    $scope.iscrollParam = {
                        mouseWheel: true,
                        bounce: true,
                        //scrollX: false,
                        scrollY: true,  // FIXME: 不能 scrollX 和 scrollY 不能一个为true，一个为false？
                        //freeScroll: true,
                        scrollbars: true,
                        fadeScrollbars: true,
                        asyncRefreshDelay: 500  // NOTICE: 如果没有这一行，初始无法使用 iscoll，除非window resize 等事件发生
                    };
                    iScrollService.state.useIScroll = true;
                    //iScrollService.enable();

                    $scope.iScrollState = iScrollService.state;
                }]);
    })();

</script>
</html>